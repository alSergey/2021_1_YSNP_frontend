'use strict';

/***
 * Header component
 */
export class Header {
    /***
     * Class constructor
     * @param {HTMLElement} parent - element where the component will be inserted
     * @param {Object} data - element data
     * @param {Object} listeners - component listeners
     */
    constructor(parent, data, listeners = undefined) {
        this.__parent = parent;
        this.__listeners = listeners;
        this.__data = data;
    }

    /***
     * Get listeners
     * @returns {Object}
     */
    get listeners() {
        return this.__listeners;
    }

    /***
     * Set listeners
     * @param val
     */
    set listeners(val) {
        this.__listeners = val;
    }

    /***
     * Add component listeners
     */
    addListeners() {
        document
            .getElementById('header')
            .addEventListener(this.__listeners.headerClick.type, this.__listeners.headerClick.listener);
    }

    /***
     * Remove component listeners
     */
    removeListeners() {
        document
            .getElementById('header')
            .removeEventListener(this.__listeners.headerClick.type, this.__listeners.headerClick.listener);
    }

    /***
     * Component HTML
     * @returns {string} - html layout
     * @private
     */
    __getTemplate() {
        return `
           <div class="header" id="header">
                    <div class="header-inner">
                        <div class="header-left">
                            <a class="header-left__brand" data-action="brandClick" href="/">
                                <svg height="60pt" width="130pt" viewBox="0 0 100 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="103.5" cy="38.5" r="3.5" fill="#D31E1E"/>
                                <path opacity="0.5" d="M25.0938 42V14.6836H27.8359V32.5781L36.0625 23.0859H39.6484L32.8984 30.6445L40.4219 42H37.1172L31.1406 32.543L27.8359 36.2344V42H25.0938ZM44.1484 32.543C44.1484 34.9336 44.6992 36.832 45.8008 38.2383C46.9023 39.6445 48.2734 40.3477 49.9141 40.3477C51.5312 40.3477 52.8906 39.6445 53.9922 38.2383C55.1172 36.832 55.6797 34.9336 55.6797 32.543C55.6797 30.1055 55.1172 28.1953 53.9922 26.8125C52.8672 25.4297 51.5078 24.7383 49.9141 24.7383C48.2969 24.7383 46.9258 25.4297 45.8008 26.8125C44.6992 28.1953 44.1484 30.1055 44.1484 32.543ZM41.4062 32.543C41.4062 29.6602 42.1445 27.2578 43.6211 25.3359C45.1211 23.4141 47.2188 22.4531 49.9141 22.4531C52.5859 22.4531 54.6719 23.4141 56.1719 25.3359C57.6719 27.2578 58.4219 29.6602 58.4219 32.543C58.4219 33.7617 58.2578 34.9453 57.9297 36.0938C57.625 37.2422 57.1445 38.3203 56.4883 39.3281C55.8555 40.3125 54.9648 41.1094 53.8164 41.7188C52.6914 42.3281 51.3906 42.6328 49.9141 42.6328C48.4609 42.6328 47.1602 42.3398 46.0117 41.7539C44.8867 41.1445 43.9961 40.3477 43.3398 39.3633C42.707 38.3555 42.2266 37.2773 41.8984 36.1289C41.5703 34.9805 41.4062 33.7852 41.4062 32.543ZM60.25 23.0859H63.4141L67.3164 34.1602C67.9023 35.8008 68.4297 37.3945 68.8984 38.9414H69.0391C69.3906 37.793 69.9062 36.1992 70.5859 34.1602L74.3125 23.0859H77.4062L69.25 45.1641C68.5469 47.0391 67.7266 48.3516 66.7891 49.1016C65.875 49.875 64.75 50.2617 63.4141 50.2617H62.3594V48.0117H62.9922C63.8828 48.0117 64.6328 47.7539 65.2422 47.2383C65.875 46.7227 66.4375 45.7969 66.9297 44.4609L67.6328 42.2461L60.25 23.0859ZM81.3086 37.1484C81.3086 38.0391 81.6836 38.8008 82.4336 39.4336C83.1836 40.043 84.2148 40.3477 85.5273 40.3477C87.1914 40.3477 88.6094 39.8086 89.7812 38.7305C90.9766 37.6523 91.5742 36.2812 91.5742 34.6172V31.9805C90.543 32.2383 88.9023 32.543 86.6523 32.8945C84.8242 33.2227 83.4766 33.7266 82.6094 34.4062C81.7422 35.0859 81.3086 36 81.3086 37.1484ZM78.5664 37.3594C78.5664 33.8438 81.2852 31.6641 86.7227 30.8203C89.1602 30.4219 90.7773 30.0938 91.5742 29.8359V28.7461C91.5742 27.5742 91.1523 26.6016 90.3086 25.8281C89.4648 25.0547 88.2695 24.668 86.7227 24.668C85.5977 24.668 84.5078 24.9375 83.4531 25.4766C82.4219 25.9922 81.543 26.6953 80.8164 27.5859L79.0586 26.1094C79.9961 25.0312 81.1211 24.1523 82.4336 23.4727C83.7695 22.793 85.1758 22.4531 86.6523 22.4531C91.7148 22.4531 94.2461 24.9258 94.2461 29.8711V42H91.6445V38.9062C91.2695 39.9141 90.4961 40.793 89.3242 41.543C88.1523 42.2695 86.7695 42.6328 85.1758 42.6328C83.0898 42.6328 81.4609 42.1406 80.2891 41.1562C79.1406 40.1719 78.5664 38.9062 78.5664 37.3594Z" fill="black"/>
                                </svg>
                            </a>

                            <button class="header-left__location" data-action="locationClick">
                                <svg height="8pt" width="8pt" viewBox="-119 -21 682 682.66669"  xmlns="http://www.w3.org/2000/svg"><path d="m216.210938 0c-122.664063 0-222.460938 99.796875-222.460938 222.460938 0 154.175781 222.679688 417.539062 222.679688 417.539062s222.242187-270.945312 222.242187-417.539062c0-122.664063-99.792969-222.460938-222.460937-222.460938zm67.121093 287.597656c-18.507812 18.503906-42.8125 27.757813-67.121093 27.757813-24.304688 0-48.617188-9.253907-67.117188-27.757813-37.011719-37.007812-37.011719-97.226562 0-134.238281 17.921875-17.929687 41.761719-27.804687 67.117188-27.804687 25.355468 0 49.191406 9.878906 67.121093 27.804687 37.011719 37.011719 37.011719 97.230469 0 134.238281zm0 0"/></svg>
                                <span class="header-left__location-name">${this.__data.location}</span>
                            </button>
                        </div>
                        
                        <div class="header-right">
                            <button class="header-right__create-button" data-action="createProductClick">Разместить объявление</button>
                            
                            <button class="header-right__account" data-action="accountClick">
                                <svg height="28pt" width="28pt" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m437.019531 74.980469c-48.351562-48.351563-112.640625-74.980469-181.019531-74.980469-68.382812 0-132.667969 26.628906-181.019531 74.980469-48.351563 48.351562-74.980469 112.636719-74.980469 181.019531 0 68.378906 26.628906 132.667969 74.980469 181.019531 48.351562 48.351563 112.636719 74.980469 181.019531 74.980469 68.378906 0 132.667969-26.628906 181.019531-74.980469 48.351563-48.351562 74.980469-112.640625 74.980469-181.019531 0-68.382812-26.628906-132.667969-74.980469-181.019531zm-308.679687 367.40625c10.707031-61.648438 64.128906-107.121094 127.660156-107.121094 63.535156 0 116.953125 45.472656 127.660156 107.121094-36.347656 24.972656-80.324218 39.613281-127.660156 39.613281s-91.3125-14.640625-127.660156-39.613281zm46.261718-218.519531c0-44.886719 36.515626-81.398438 81.398438-81.398438s81.398438 36.515625 81.398438 81.398438c0 44.882812-36.515626 81.398437-81.398438 81.398437s-81.398438-36.515625-81.398438-81.398437zm235.042969 197.710937c-8.074219-28.699219-24.109375-54.738281-46.585937-75.078125-13.789063-12.480469-29.484375-22.328125-46.359375-29.269531 30.5-19.894531 50.703125-54.3125 50.703125-93.363281 0-61.425782-49.976563-111.398438-111.402344-111.398438s-111.398438 49.972656-111.398438 111.398438c0 39.050781 20.203126 73.46875 50.699219 93.363281-16.871093 6.941406-32.570312 16.785156-46.359375 29.265625-22.472656 20.339844-38.511718 46.378906-46.585937 75.078125-44.472657-41.300781-72.355469-100.238281-72.355469-165.574219 0-124.617188 101.382812-226 226-226s226 101.382812 226 226c0 65.339844-27.882812 124.277344-72.355469 165.578125zm0 0"/></svg>
                            </button>
                        </div>
                    </div>
            </div>
        `;
    }

    /***
     * Add component to parent
     */
    render() {
        const template = this.__getTemplate();
        this.__parent.insertAdjacentHTML('beforeend', template);
    }
}
